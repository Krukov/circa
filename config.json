{
  "storages": {
    "mem": "redis://localhost/2"
  },
  "rules": {
    "/posts/{id}": [
      {
        "type": "idempotency",
        "key": "post-ide-{R:body|hash}",
        "ttl": "10s",
        "methods": ["POST"]
      },
      {
        "key": "posts-{id}:key",
        "type": "early",
        "storage": "mem",
        "early_ttl": "1m",
        "ttl": "10m"
      },
      {
        "type": "invalidate",
        "methods": ["POST", "DELETE", "PUT", "PATCH"],
        "key": "posts-{id}:key"
      }
    ],
    "/posts/3": [
      {
        "type": "skip",
        "methods": ["GET", "POST", "DELETE", "PUT", "PATCH"]
      }
    ],
    "hit/posts": [
      {
        "type": "hit",
        "ttl": "10m",
        "key": "posts:hit:key",
        "hits": 100,
        "update_after": 50
      },
      {
        "type": "proxy",
        "path": "/posts/"
      }
    ],
    "/*": [
      {
        "type": "request_id",
        "methods": ["GET", "POST", "DELETE", "PUT", "PATCH"],
        "skip_return": true
      },
      {
        "type": "retry",
        "methods": ["GET", "PATCH"],
        "backoff": "1s",
        "count": 2
      }

    ]
  },
  "options": {
    "host": "http://localhost:8888",
    "timeout": "1m30s"
  }
}