{
  "storages": {
    "r": "redis://localhost/0?timeout=1s&pool_size=2"
  },
  "rules": {
    "/posts/{id}": [
      {
        "key": "posts-{id}:key",
        "ttl": "1m"
      },
      {
        "type": "rate-limit",
        "key": "post:rate-limit",
        "ttl": "10m",
        "hits": 100
      },
      {
        "type": "rate-limit",
        "key": "post:rate-limit:{id}",
        "ttl": "1m",
        "block": "5m",
        "hits": 10
      },
      {
        "methods": ["POST", "DELETE", "PUT", "PATCH"],
        "type": "invalidation",
        "key": "posts-{id}:key"
      }
    ],
    "/*": [
      {
        "key": "{request_path}:fail",
        "ttl": "1m",
        "type": "fail"
      },
      {
        "type": "request_id"
      },
      {
        "type": "retry",
        "backoff": "1s",
        "count": 2
      }

    ]
  },
  "options": {
    "host": "http://localhost:8888",
    "timeout": "1m30s"
  }
}